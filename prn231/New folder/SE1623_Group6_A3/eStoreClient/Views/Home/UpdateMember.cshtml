@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Update </title>
    <script src="~/js/javascrip.js"></script>
    <script src="~/js/javascrip.js"></script>
</head>
<body>
    <div >
        <h2>Update  </h2> 
        
        <div class="form-group">
            <label asp-for-"Id"></label>
            <input type="text" class="form-control" id="Id" readonly />
        </div>
        <div class="form-group">
            <label for="Email">Email:</label>
            <input type="text" class="form-control" id="Email" />
        </div>
        <div class="form-group">
            <label for="CompanyName">Company Name:</label>
            <input type="text" class="form-control" id="CompanyName" />
        </div>
        <div class="form-group">
            <label for="City">City:</label>
            <input type="text" class="form-control" id="City" />
        </div>
        <div class="form-group">
            <label for="Country">Country:</label>
            <input type="text" class="form-control" id="Country" />
        </div>
        <div class="form-group">
            <label for="Password">Password:</label>
            <input type="text" class="form-control" id="Password" />
        </div>
        <div class="text-center panel-body">
            <button type="submit" id="UpdateButton">Update</button>
        </div>
        
        <div style="display:none" id="resultDiv">
            <h2>Reservation</h2>
            <table class="table table-sm table-striped table-bordered m-2">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Email</th>
                        <th>Company Name</th>
                        <th>City</th>
                        <th>Country</th>
                        <th>Password</th>
                    </tr>
                    </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            GetMember();
            function GetMember(){
                let params = (new URL(document.location)).searchParams;
                let id = params.get("id");

                $.ajax({
                    url: "https://localhost:7063/Member/Member/" + id,
                    type: "get",
                    contentType: "application/json",
                    success: function (result, status, xhr) {
                        console.log(JSON.stringify("22222"));
                        $("#Id").val(result["memberId"]);
                        $("#Email").val(result["email"]);
                        $("#CompanyName").val(result["companyName"]);
                        $("#City").val(result["city"]);
                        $("#Country").val(result["country"]);
                        $("#Password").val(result["password"]);
                    }
                });
            }

            $("#UpdateButton").click(function (e) {
                var xhttp = new XMLHttpRequest();

                let params = (new URL(document.location)).searchParams;
                let id = params.get("id");
                xhttp.open("PUT", "https://localhost:7063/Member/Member/" + id, true);
                xhttp.setRequestHeader("Content-type", "application/json");
                var obj = {
                    MemberId: document.getElementById("Id").value,
                    Email: document.getElementById("Email").value,
                    CompanyName: document.getElementById("CompanyName").value,
                    City: document.getElementById("City").value,
                    Country: document.getElementById("Country").value,
                    Password: document.getElementById("Password").value,


                };

                xhttp.send(JSON.stringify(obj));
               alert("Success");
               
            });


        });
    </script>
</body>
</html>
